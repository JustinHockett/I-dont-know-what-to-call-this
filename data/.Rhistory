install.packages("gclus")
library(gclus)
install.packages("cluster")
install.packages("cluster")
install.packages("gclus")
library(gclus)
library("cluster")
install.packages("gclus")
install.packages("gclus")
library(gclus)
install.packages("ape")
library(ape)
rm(list=ls())
graphics.off()
##This sets it to the data file for the analytical workflows class repo
setwd("C:/GIT/I-dont-know-what-to-call-this/data/")
#install.packages("ade4")
library(ade4)
#install.packages("vegan")
library(vegan)
#install.packages("ggplot2")
library(ggplot2)
#install.packages("raster")
library(raster)
#install.packages("sp")
library(sp)
#install.packages("RColorBrewer")
library(RColorBrewer)
#install.packages("cluster")
#library("cluster")
#install.packages("gclus")
library(gclus)
#install.packages("ape")
library(ape)
source("C:/GIT/I-dont-know-what-to-call-this/code/Verde year 1 NMDS.R")
source("C:/GIT/I-dont-know-what-to-call-this/code/Verde year 1 NMDS.R")
##Species matrix
verdsp_sp18<-read.csv("verde_yr1_spring.csv")
#head() shows you the columns and first six rows of the imported
head(verdsp_sp18)
#observe the dimensions of the imported matrix#
dim(verdsp_sp18)
#this code subsets columns 2-118, this is the number of species
spdat_sp18<-verdsp_sp18[2:118]
head(spdat_sp18) # double checks that the correct data was subset
verdhab_sp18<-read.csv("verde_hab_yr1_spring.csv")
head(verdhab_sp18)
colnames(verdhab_sp18)
dim(verdhab_sp18)
##ordination by NMDS with RAW Data. Run this if you only want to view the solutions related to the untransformed data.
##This data has a higher stress solutionn when compared to the transformed data#
NMDS1 <- metaMDS(spdat_sp18, distance = "bray", k = 2)
#head(NMDS1)
NMDS1$stress
##extract only the variables we want to measure within the habitat matrix
envhab<-verdhab_sp18[,c(8:21)]
##stores data for use in the ordination, not entirely sure how it works
##This is using untransformed data (NMDS1)
joint<-envfit(NMDS1,envhab,permutations=999,strata=NULL,choices=c(1,2),scaling="sites")
joint
colnames(joint)
colnames(joint)
class(joint)
scores(joint,"vectors")
class(joint)
ordiArrowMul(joint)
##this provides the x and y points related to the arrows that will represent correlations of the species/samples
envscores<-as.data.frame(scores(joint,display="vectors"))
envscores
##Alternative code using only SIGNIFICANT env variables (less hectic)
envhab2_spring18<-verdhab_spring[,c(8,11,17,19)]
##Alternative code using only SIGNIFICANT env variables (less hectic)
envhab2_spring18<-verdhab_sp18[,c(8,11,17,19)]
joint2_spring18<-envfit(NMDS1,envhab2_spring18,permutations=999,strata=NULL,choices=c(1,2),scaling="sites")
source("C:/GIT/I-dont-know-what-to-call-this/code/Verde Yr 1 Spring NMDS.R")
source("C:/GIT/I-dont-know-what-to-call-this/code/Verde Yr 1 Spring NMDS.R")
source("C:/GIT/I-dont-know-what-to-call-this/code/Verde Yr 1 Spring NMDS.R")
ordihull(NMDS1, verdhab_sp18$Micro, display= "sites", draw= c("polygon"),
col=NULL, border=c("magenta", "magenta", "magenta", "black", "black", "black", "blue", "blue", "blue" ) ,
lty= c(1), lwd=2.5)
txt <- c("Riffle", "Pool", "Run")
legend('bottomright', txt , pch=c(15,16,17),col=c("magenta","black","blue"),
cex=1, bty = "y")
text(-1.2,-.7,pos=1,"Stress=15.86",cex=.9)
source("C:/GIT/I-dont-know-what-to-call-this/code/Verde Yr 1 Spring NMDS.R")
